{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"style\", \"source\", \"duration\", \"easing\", \"children\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useCallback, useLayoutEffect, useRef, useState } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { usePrevious } from \"./hooks\";\nimport { isEqual } from \"./helpers\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var CrossfadeImage = function CrossfadeImage(_ref) {\n  var style = _ref.style,\n    source = _ref.source,\n    _ref$duration = _ref.duration,\n    duration = _ref$duration === void 0 ? 500 : _ref$duration,\n    _ref$easing = _ref.easing,\n    easing = _ref$easing === void 0 ? Easing.ease : _ref$easing,\n    children = _ref.children,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var prevSource = usePrevious(source);\n  var nextSource = useRef();\n  var opacity = useRef(new Animated.Value(0)).current;\n  var _useState = useState(source),\n    _useState2 = _slicedToArray(_useState, 2),\n    oldSource = _useState2[0],\n    setOldSource = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    newSource = _useState4[0],\n    setNewSource = _useState4[1];\n  useLayoutEffect(function () {\n    if (prevSource && !isEqual(source, prevSource)) {\n      if (!nextSource.current) {\n        setNewSource(source);\n      }\n      nextSource.current = source;\n    }\n  }, [source, prevSource]);\n  var handleUpdate = useCallback(function () {\n    setNewSource(nextSource.current);\n    opacity.setValue(0);\n    if (isEqual(oldSource, nextSource.current)) {\n      nextSource.current = undefined;\n    }\n  }, [opacity, oldSource]);\n  var handleLoad = useCallback(function () {\n    Animated.timing(opacity, {\n      toValue: 1,\n      duration: duration,\n      easing: easing,\n      useNativeDriver: true\n    }).start(function () {\n      if (newSource && !isEqual(oldSource, newSource)) {\n        setOldSource(newSource);\n      } else {\n        handleUpdate();\n      }\n    });\n  }, [opacity, oldSource, newSource, duration, easing, handleUpdate]);\n  return _jsxs(View, {\n    style: [styles.root, style],\n    children: [_jsx(Image, _objectSpread(_objectSpread({}, props), {}, {\n      style: styles.image,\n      source: oldSource,\n      fadeDuration: 0,\n      onLoad: handleUpdate\n    })), newSource && _jsx(Animated.Image, _objectSpread(_objectSpread({}, props), {}, {\n      style: [styles.image, {\n        opacity: opacity\n      }],\n      source: newSource,\n      fadeDuration: 0,\n      onLoad: handleLoad\n    })), children]\n  });\n};\nvar styles = StyleSheet.create({\n  root: {\n    overflow: 'hidden'\n  },\n  image: _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n    width: '100%',\n    height: '100%'\n  })\n});","map":{"version":3,"names":["React","useCallback","useLayoutEffect","useRef","useState","Animated","Easing","Image","StyleSheet","View","usePrevious","isEqual","jsx","_jsx","jsxs","_jsxs","CrossfadeImage","_ref","style","source","_ref$duration","duration","_ref$easing","easing","ease","children","props","_objectWithoutProperties","_excluded","prevSource","nextSource","opacity","Value","current","_useState","_useState2","_slicedToArray","oldSource","setOldSource","_useState3","_useState4","newSource","setNewSource","handleUpdate","setValue","undefined","handleLoad","timing","toValue","useNativeDriver","start","styles","root","_objectSpread","image","fadeDuration","onLoad","create","overflow","absoluteFillObject","width","height"],"sources":["/home/wamweru/dod_smart_home/dod_smart_home/application/node_modules/react-native-crossfade-image/src/index.tsx"],"sourcesContent":["import React, { useCallback, useLayoutEffect, useRef, useState } from 'react';\nimport {\n  Animated,\n  Easing,\n  EasingFunction,\n  Image,\n  ImageProps,\n  ImageSourcePropType,\n  StyleSheet,\n  View,\n} from 'react-native';\n\nimport { usePrevious } from './hooks';\nimport { isEqual } from './helpers';\n\nexport interface CrossfadeImageProps extends ImageProps {\n  duration?: number;\n  easing?: EasingFunction;\n  children?: React.ReactNode;\n}\n\nexport const CrossfadeImage = ({\n  style,\n  source,\n  duration = 500,\n  easing = Easing.ease,\n  children,\n  ...props\n}: CrossfadeImageProps) => {\n  const prevSource = usePrevious(source);\n  const nextSource = useRef<ImageSourcePropType>();\n  const opacity = useRef(new Animated.Value(0)).current;\n  const [oldSource, setOldSource] = useState<ImageSourcePropType>(source);\n  const [newSource, setNewSource] = useState<ImageSourcePropType>();\n\n  useLayoutEffect(() => {\n    if (prevSource && !isEqual(source, prevSource)) {\n      if (!nextSource.current) {\n        setNewSource(source);\n      }\n\n      nextSource.current = source;\n    }\n  }, [source, prevSource]);\n\n  const handleUpdate = useCallback(() => {\n    // If the source has been changed during animation\n    // then update newSource to the saved value,\n    // otherwise reset newSource to undefined\n    setNewSource(nextSource.current);\n    opacity.setValue(0);\n\n    if (isEqual(oldSource, nextSource.current)) {\n      nextSource.current = undefined;\n    }\n  }, [opacity, oldSource]);\n\n  const handleLoad = useCallback(() => {\n    Animated.timing(opacity, {\n      toValue: 1,\n      duration,\n      easing,\n      useNativeDriver: true,\n    }).start(() => {\n      if (newSource && !isEqual(oldSource, newSource)) {\n        // Replace oldSource with newSource,\n        // this will trigger handleUpdate\n        setOldSource(newSource);\n      } else {\n        // If oldSource and newSource are the same\n        // then explicitly call handleUpdate\n        handleUpdate();\n      }\n    });\n  }, [opacity, oldSource, newSource, duration, easing, handleUpdate]);\n\n  return (\n    <View style={[styles.root, style]}>\n      <Image\n        {...props}\n        style={styles.image}\n        source={oldSource}\n        fadeDuration={0}\n        onLoad={handleUpdate}\n      />\n      {newSource && (\n        <Animated.Image\n          {...props}\n          style={[styles.image, { opacity }]}\n          source={newSource}\n          fadeDuration={0}\n          onLoad={handleLoad}\n        />\n      )}\n      {children}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  root: {\n    overflow: 'hidden',\n  },\n  image: {\n    ...StyleSheet.absoluteFillObject,\n    width: '100%',\n    height: '100%',\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}