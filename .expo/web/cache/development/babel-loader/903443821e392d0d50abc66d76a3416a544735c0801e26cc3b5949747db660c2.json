{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { VictoryChart, VictoryLine } from 'victory-native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Socket = function Socket() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    temperatureValue = _useState2[0],\n    setTemperatureValue = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    humidityValue = _useState4[0],\n    setHumidityValue = _useState4[1];\n  useEffect(function () {\n    var ws = new WebSocket('ws://192.168.1.109:5000/json');\n    ws.onopen = function () {\n      console.log('WebSocket connection opened');\n    };\n    ws.onmessage = function (e) {\n      var mainJson = JSON.parse(e.data);\n      var humidity = mainJson.map(function (val) {\n        return {\n          x: val._time,\n          y: val.humidity\n        };\n      });\n      var temperature = mainJson.map(function (val) {\n        return {\n          x: val._time,\n          y: val.temperature\n        };\n      });\n      setHumidityValue(humidity);\n      setTemperatureValue(temperature);\n    };\n    ws.onerror = function (e) {\n      console.log(e.message);\n    };\n    ws.onclose = function (e) {\n      console.log(e.code, e.reason);\n    };\n  }, []);\n  return _jsxs(View, {\n    children: [_jsxs(View, {\n      children: [_jsx(Text, {\n        children: \"Humidity\"\n      }), _jsx(VictoryChart, {\n        children: _jsx(VictoryLine, {\n          data: humidityValue\n        })\n      })]\n    }), _jsxs(View, {\n      children: [_jsx(Text, {\n        children: \"Temperature\"\n      }), _jsx(VictoryChart, {\n        children: _jsx(VictoryLine, {\n          data: temperatureValue\n        })\n      })]\n    })]\n  });\n};\nexport default Socket;","map":{"version":3,"names":["React","useEffect","useState","View","Text","VictoryChart","VictoryLine","jsx","_jsx","jsxs","_jsxs","Socket","_useState","_useState2","_slicedToArray","temperatureValue","setTemperatureValue","_useState3","_useState4","humidityValue","setHumidityValue","ws","WebSocket","onopen","console","log","onmessage","e","mainJson","JSON","parse","data","humidity","map","val","x","_time","y","temperature","onerror","message","onclose","code","reason","children"],"sources":["/home/wamweru/dod_smart_home/dod_smart_home/application/data/webSocket.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, Text } from 'react-native';\n// import { WebSocket } from 'react-native-websocket';\nimport { VictoryChart, VictoryLine } from 'victory-native';\n\nconst Socket = () => {\n    const [temperatureValue, setTemperatureValue]= useState([])\n    const [humidityValue, setHumidityValue]= useState([])\n    useEffect(() => {\n      let ws = new WebSocket('ws://192.168.1.109:5000/json');\n       ws.onopen = () => {\n          //Connection opened\n         console.log('WebSocket connection opened');\n     //    ws.send('Hello, server!'); // Send a message to the server\n      };\n      ws.onmessage = (e) => {\n        // Receive a message from the server\n        const mainJson = JSON.parse(e.data)\n        const humidity = mainJson.map((val)=>({\n          \n                x: val._time,\n                y: val.humidity\n            \n        }));\n\n        const temperature = mainJson.map((val)=>({\n            \n                x: val._time,\n                y: val.temperature\n            \n        }));\n        setHumidityValue(humidity)\n        setTemperatureValue(temperature)\n        // console.log(temperature)\n        // console.log(e.data);\n      };\n      ws.onerror = (e) => {\n        // An error occurred\n        console.log(e.message);\n      };\n      ws.onclose = (e) => {\n        // Connection closed\n        console.log(e.code, e.reason);\n      };\n    }, []);\n\n    return (\n      <View>\n        <View>\n        <Text>Humidity</Text>\n        <VictoryChart>\n          <VictoryLine\n          data={humidityValue}\n          />\n        </VictoryChart>\n      </View>\n      <View>\n        <Text>Temperature</Text>\n      <VictoryChart>\n          <VictoryLine\n          data={temperatureValue}\n          />\n        </VictoryChart>\n      </View>\n      </View>\n    );\n  };\n  export default Socket;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAGnD,SAASC,YAAY,EAAEC,WAAW,QAAQ,gBAAgB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE3D,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAA,EAAS;EACjB,IAAAC,SAAA,GAA+CV,QAAQ,CAAC,EAAE,CAAC;IAAAW,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAApDG,gBAAgB,GAAAF,UAAA;IAAEG,mBAAmB,GAAAH,UAAA;EAC5C,IAAAI,UAAA,GAAyCf,QAAQ,CAAC,EAAE,CAAC;IAAAgB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA9CE,aAAa,GAAAD,UAAA;IAAEE,gBAAgB,GAAAF,UAAA;EACtCjB,SAAS,CAAC,YAAM;IACd,IAAIoB,EAAE,GAAG,IAAIC,SAAS,CAAC,8BAA8B,CAAC;IACrDD,EAAE,CAACE,MAAM,GAAG,YAAM;MAEhBC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;IAE7C,CAAC;IACDJ,EAAE,CAACK,SAAS,GAAG,UAACC,CAAC,EAAK;MAEpB,IAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACH,CAAC,CAACI,IAAI,CAAC;MACnC,IAAMC,QAAQ,GAAGJ,QAAQ,CAACK,GAAG,CAAC,UAACC,GAAG;QAAA,OAAI;UAE9BC,CAAC,EAAED,GAAG,CAACE,KAAK;UACZC,CAAC,EAAEH,GAAG,CAACF;QAEf,CAAC;MAAA,CAAC,CAAC;MAEH,IAAMM,WAAW,GAAGV,QAAQ,CAACK,GAAG,CAAC,UAACC,GAAG;QAAA,OAAI;UAEjCC,CAAC,EAAED,GAAG,CAACE,KAAK;UACZC,CAAC,EAAEH,GAAG,CAACI;QAEf,CAAC;MAAA,CAAC,CAAC;MACHlB,gBAAgB,CAACY,QAAQ,CAAC;MAC1BhB,mBAAmB,CAACsB,WAAW,CAAC;IAGlC,CAAC;IACDjB,EAAE,CAACkB,OAAO,GAAG,UAACZ,CAAC,EAAK;MAElBH,OAAO,CAACC,GAAG,CAACE,CAAC,CAACa,OAAO,CAAC;IACxB,CAAC;IACDnB,EAAE,CAACoB,OAAO,GAAG,UAACd,CAAC,EAAK;MAElBH,OAAO,CAACC,GAAG,CAACE,CAAC,CAACe,IAAI,EAAEf,CAAC,CAACgB,MAAM,CAAC;IAC/B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OACEjC,KAAA,CAACP,IAAI;IAAAyC,QAAA,GACHlC,KAAA,CAACP,IAAI;MAAAyC,QAAA,GACLpC,IAAA,CAACJ,IAAI;QAAAwC,QAAA,EAAC;MAAQ,CAAM,CAAC,EACrBpC,IAAA,CAACH,YAAY;QAAAuC,QAAA,EACXpC,IAAA,CAACF,WAAW;UACZyB,IAAI,EAAEZ;QAAc,CACnB;MAAC,CACU,CAAC;IAAA,CACX,CAAC,EACPT,KAAA,CAACP,IAAI;MAAAyC,QAAA,GACHpC,IAAA,CAACJ,IAAI;QAAAwC,QAAA,EAAC;MAAW,CAAM,CAAC,EAC1BpC,IAAA,CAACH,YAAY;QAAAuC,QAAA,EACTpC,IAAA,CAACF,WAAW;UACZyB,IAAI,EAAEhB;QAAiB,CACtB;MAAC,CACU,CAAC;IAAA,CACX,CAAC;EAAA,CACD,CAAC;AAEX,CAAC;AACD,eAAeJ,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}